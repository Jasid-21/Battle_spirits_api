(function(){"use strict";var e={65:function(e,t,o){var s=o(9242),r=o(3396);function n(e,t){const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(o)}var a=o(89);const i={},c=(0,a.Z)(i,[["render",n]]);var d=c,l=o(2483);const u={class:"masterContainer"},p=(0,r.uE)('<footer data-v-c4b8edde><div data-v-c4b8edde><strong data-v-c4b8edde>Contact and feedback: </strong> siternet.21@gmail.com </div><div data-v-c4b8edde><strong data-v-c4b8edde>Privacy Policy: </strong>This website does not store or use information from visitors. </div><div data-v-c4b8edde> This website is a nonprofit fanmade Online version for Bandai&#39;s Battle Spirits Saga tcg. </div><div data-v-c4b8edde> Card design &amp; artwork are <b data-v-c4b8edde>Â© BNP/BANDAI</b> and used without permission under fair use. </div><div data-v-c4b8edde> Please support the official release. <a class="official_site" href="https://battlespirits-saga.com/" target="_blank" data-v-c4b8edde> Oficial Site </a></div></footer>',1);function _(e,t,o,s,n,a){const i=(0,r.up)("Navbar"),c=(0,r.up)("Instructions");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(i),(0,r.Wm)(c),p])}const m={class:"to_shop",href:"https://www.tcgplayer.com/",target:"_blank"};function v(e,t,o,s,n,a){const i=(0,r.up)("router-link"),c=(0,r.up)("fai");return(0,r.wg)(),(0,r.iD)("nav",null,[(0,r.Wm)(i,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(i,{to:"/rooms"},{default:(0,r.w5)((()=>[(0,r.Uk)("Multiplayer")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(i,{to:"/loadDeck"},{default:(0,r.w5)((()=>[(0,r.Uk)("Deck Builder")])),_:1}),(0,r._)("a",m,[(0,r.Uk)(" Shop Cards "),(0,r.Wm)(c,{icon:"shop"})])])}var g={name:"navbar"};const h=(0,a.Z)(g,[["render",v],["__scopeId","data-v-3b675d22"]]);var k=h;const f={class:"instructions_container"},w=(0,r.uE)('<div class="instructions" data-v-21005122><div class="title" data-v-21005122>For deck building</div><div class="content" data-v-21005122> Use an online deck builder and copy the built deck in tts format (Tabletop Simulator). Like this: <br data-v-21005122><br data-v-21005122> [ST01-016,ST01-016,ST01-016,ST01-015,ST01-015,ST01-015,ST01-015,ST01-014, ST01-014,ST01-014,ST01-014,ST01-013,ST01-013,ST01-013,ST01-013,...] <br data-v-21005122><br data-v-21005122> Then paste the copied deck into the &quot;import&quot; box in the Deck Builder section and click &quot;Import&quot; button. <br data-v-21005122> You can move between pages using the navigation bar above. <br data-v-21005122><b data-v-21005122>Important: </b> From now, this app doesn&#39;t support side deck. So, in order to avoid issues, just import main decks. <br data-v-21005122><br data-v-21005122> You can use the buttons in the Deck Builder section to save the imported deck or load a previous saved deck. </div></div><div class="instructions" data-v-21005122><div class="title" data-v-21005122>For Battle</div><div class="content" data-v-21005122> Move to the Multiplayer page. There you&#39;ll see an &quot;Username&quot; and &quot;Select Deck&quot; inputs. <br data-v-21005122> Username by defauls is Player but you can change it. <br data-v-21005122><br data-v-21005122> Chose a previously saved deck and host a room by clicking the &quot;Host&quot; button or send a request to an open room. <br data-v-21005122> To see the available rooms click the refresh button. <br data-v-21005122><br data-v-21005122> If you are hosting a room, you can see the request sent to you. Just chose one and accept it. </div></div>',2),y=[w];function D(e,t,o,s,n,a){return(0,r.wg)(),(0,r.iD)("div",f,y)}var b={name:"InstructionsContainer"};const C=(0,a.Z)(b,[["render",D],["__scopeId","data-v-21005122"]]);var T=C,S={name:"HomeView",components:{Navbar:k,Instructions:T},setup(){return{}}};const M=(0,a.Z)(S,[["render",_],["__scopeId","data-v-c4b8edde"]]);var R=M,q=o(7139);const I=e=>((0,r.dD)("data-v-14ec306b"),e=e(),(0,r.Cn)(),e),j={class:"masterContainer"},O={class:"rooms_and_requests_container"},H={key:0,class:"hosting_username"},B=I((()=>(0,r._)("b",null,"Your username.",-1))),W=I((()=>(0,r._)("br",null,null,-1)));function A(e,t,o,s,n,a){const i=(0,r.up)("Navbar"),c=(0,r.up)("UserData"),d=(0,r.up)("Requests"),l=(0,r.up)("Rooms");return(0,r.wg)(),(0,r.iD)("div",j,[(0,r.Wm)(i),(0,r.Wm)(c,{onUsername:s.handleUsername,onChosenDeck:s.handleChosenDeck},null,8,["onUsername","onChosenDeck"]),(0,r._)("div",O,[(0,r.Wm)(d,{chosen_deck:s.chosen_deck},null,8,["chosen_deck"]),(0,r.Wm)(l,{username:s.username,chosen_deck:s.chosen_deck},null,8,["username","chosen_deck"])]),s.hosting_name?((0,r.wg)(),(0,r.iD)("div",H,[B,W,(0,r.Uk)(" "+(0,q.zw)(s.hosting_name),1)])):(0,r.kq)("",!0)])}const Y={class:"masterContainer"},P={class:"avaliable_rooms_container"},F={class:"avaliable_rooms"},Z=["onClick"],U={class:"buttons"},z=["disabled"];function x(e,t,o,s,n,a){return(0,r.wg)(),(0,r.iD)("div",Y,[(0,r._)("div",P,[(0,r._)("ul",F,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.rooms,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:(0,q.C_)({choosen:s.choosen_room.id==e.id}),onClick:t=>s.selectRoom(e.id,e.username)},(0,q.zw)(e.username),11,Z)))),128))])]),(0,r._)("div",U,[(0,r._)("button",{class:"refresh",onClick:t[0]||(t[0]=(...e)=>s.refresh&&s.refresh(...e))},"Refresh"),s.hosting?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"host",onClick:t[1]||(t[1]=(...e)=>s.host&&s.host(...e))},"Host")),s.hosting?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"cancel",onClick:t[2]||(t[2]=(...e)=>s.cancel&&s.cancel(...e))},"Cancel")):(0,r.kq)("",!0),(0,r._)("button",{class:"request",onClick:t[3]||(t[3]=(...e)=>s.request&&s.request(...e)),disabled:s.hosting},"Request",8,z)])])}o(7658);var E=o(2066),N=o(2492),K=o.n(N);function V(e,t,o,s=!1){const r=o.find((e=>e.id==t));if(r)return{msg:e,important:s,sender_name:r.username,sender_id:r.id}}class L{constructor(e,t){this.id=e,this.url=t,this.seted=!1,this.rested=!1,this.cores=[],this.selected=!1,this.activated=!1}select(){this.selected=!0,setTimeout((()=>{this.selected=!1}),250)}activate(){this.activated=!0,setTimeout((()=>{this.activated=!1}),250)}}class J{constructor(e,t,o){this.deck_list=e,this.chosen_deck={},this.store=t,this.socket=new E.io,this.socket.on("connect",(()=>{console.log("Connectd: ",this.socket.id)})),this.socket.on("hosting_room",(e=>{this.store.commit("setHostingName",e)})),this.socket.on("request_duel",(e=>{this.store.commit("requestDuel",e)})),this.socket.on("accept_duel",(e=>{this.socket.emit("start_duel",e)})),this.socket.on("duel_start",(e=>{const{op_id:t,deck:s,op_deck:r,cores:n,op_cores:a,active:i,players:c}=e;this.store.dispatch("addPlayers",{op_id:t,players:c,active:i}),this.store.commit("setChoosenDecks",{deck:s,op_deck:r}),this.store.commit("setCores",{cores:n,op_cores:a}),o.push("/game")})),this.socket.on("socket_message",(e=>{K().fire({title:"Server message",icon:"info",text:e.msg})})),this.socket.on("draw_card",(e=>{t.dispatch("drawCard",e)})),this.socket.on("move_card",(e=>{this.store.dispatch("moveCard",e)})),this.socket.on("return_to_deck",(e=>{this.store.dispatch("returnToDeck",e)})),this.socket.on("rest_unrest",(e=>{this.store.commit("restUnrest",e)})),this.socket.on("looking_something",(e=>{this.store.commit("lookingSomething",e)})),this.socket.on("flip_burst_card",(e=>{this.store.commit("flipBurstCard",e)})),this.socket.on("reveal_top",(e=>{this.store.commit("revealTop",e)})),this.socket.on("move_cores",(e=>{this.store.dispatch("moveCores",e)})),this.socket.on("increment_cores",(e=>{this.store.commit("incrementCores",e)})),this.socket.on("change_phase",(e=>{this.store.dispatch("changePhase",e)})),this.socket.on("change_turn",(e=>{this.store.commit("changeTurn",e)})),this.socket.on("refresh_all",(e=>{this.store.commit("refreshAllCards",e),this.store.commit("refreshAllCores",e)})),this.socket.on("new_message",(e=>{this.store.commit("newMessage",e)})),this.socket.on("multi_return_to_bottom",(e=>{this.store.dispatch("multiReturnToBottom",e)})),this.socket.on("reveal_cards",(e=>{this.store.dispatch("revealCards",e)})),this.socket.on("shuffle_deck",(e=>{this.store.commit("shuffleDeck",e)})),this.socket.on("activate_effect",(e=>{this.store.commit("activateEffect",e)})),this.socket.on("select_card",(e=>{this.store.commit("selectCard",e)}))}setDeck(e){this.chosen_deck=this.deck_list.find((t=>t.name==e))}}var G=o(4870),$=o(7417),Q={name:"Rooms",props:["own","username","chosen_deck"],setup(e){const t=(0,$.oR)(),o=(0,l.tv)(),s=(0,r.Fl)((()=>e.username)),n=(0,r.Fl)((()=>e.chosen_deck));var a;const i=(0,G.iH)(!1),c=(0,G.iH)([]),d=(0,G.iH)([]),u=(0,G.iH)({name:"",id:""}),p=()=>{if("__none__"==n.value)return void K().fire({title:"App message",html:"You need to select a <strong>deck</strong> to request a duel..."});if(-1==u.value.id)return void K().fire({title:"App message",html:"You need to select a <strong>room</strong> to request a duel..."});if(a.socket.id==u.value.id)return void K().fire({title:"App message",icon:"info",html:"You can't request a duel to yourself..."});const e=c.value.find((e=>e.name==n.value)).deck;a.socket.emit("request_duel",{username:s.value,board_id:u.value.id,deckString:e})},_=async()=>{if(!s.value)return void K().fire({title:"App message",html:"Please, provide an <strong>username</strong> before hosting..."});if("__none__"==n.value)return void K().fire({title:"App message",html:"You need to select a <strong>deck</strong> to start hosting..."});const e=c.value.find((e=>e.name==n.value)).deck;a.socket.emit("host_room",{username:s.value,deck:e}),i.value=!0},m=()=>{a.socket.emit("cancel_hosting"),i.value=!1},v=async()=>{const e=await fetch("/rooms/getAll"),t=e.status;if(200===t){const t=await e.json();console.log(t),d.value=t.rooms}},g=(e,t)=>{u.value.id=e,u.value.name=t};return(0,r.bv)((()=>{c.value=JSON.parse(localStorage.getItem("BSS_Decklist")||"[]"),a=new J(c.value,t,o),t.commit("setSocket",a)})),(0,r.YP)(n,((e,t)=>{console.log("Chosen deck changed"),a.setDeck(n)})),{username:s,choosen_deck:n,deck_list:c,rooms:d,choosen_room:u,hosting:i,cancel:m,selectRoom:g,host:_,refresh:v,request:p}}};const X=(0,a.Z)(Q,[["render",x],["__scopeId","data-v-38dbae5e"]]);var ee=X;const te=e=>((0,r.dD)("data-v-12c00be0"),e=e(),(0,r.Cn)(),e),oe={class:"user_data"},se={class:"username"},re=te((()=>(0,r._)("label",{for:"username"},"Username: ",-1))),ne={class:"deck_selector"},ae=te((()=>(0,r._)("label",{for:"deck_selector"},"Select a Deck: ",-1))),ie=te((()=>(0,r._)("option",{value:"__none__"},"---",-1))),ce=["value"];function de(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("div",oe,[(0,r._)("div",se,[re,(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Type your username","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e)},null,512),[[s.nr,n.username]])]),(0,r._)("div",ne,[ae,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.choosen_deck=e)},[ie,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.deck_list,((e,t)=>((0,r.wg)(),(0,r.iD)("option",{key:t,value:e.name},(0,q.zw)(e.name),9,ce)))),128))],512),[[s.bM,n.choosen_deck]])])])}var le={name:"UserData",setup(e,{emit:t}){const o=(0,G.iH)([]),s=(0,G.iH)("Player"),n=(0,G.iH)("__none__");return(0,r.bv)((()=>{o.value=JSON.parse(localStorage.getItem("BSS_Decklist")||"[]"),t("username",s.value)})),(0,r.YP)(n,((e,o)=>{t("chosenDeck",n.value)})),(0,r.YP)(s,((e,o)=>{t("username",s.value)})),{username:s,choosen_deck:n,deck_list:o}}};const ue=(0,a.Z)(le,[["render",de],["__scopeId","data-v-12c00be0"]]);var pe=ue;const _e={class:"masterContainer"},me={class:"requests_container"},ve={class:"requests"},ge=["onClick"],he={class:"buttons"},ke=["disabled"];function fe(e,t,o,s,n,a){return(0,r.wg)(),(0,r.iD)("div",_e,[(0,r._)("div",me,[(0,r._)("ul",ve,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.requests,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.user_id,class:(0,q.C_)({choosen:s.chosen_request.id==e.user_id}),onClick:t=>s.selectRequest(e.user_id,e.username)},(0,q.zw)(e.username),11,ge)))),128))])]),(0,r._)("div",he,[(0,r._)("button",{class:"refresh",onClick:t[0]||(t[0]=(...e)=>s.accept&&s.accept(...e)),disabled:!s.chosen_request.id}," Accept ",8,ke)])])}var we={name:"Requests",setup(e){const t=(0,$.oR)(),o=(0,r.Fl)((()=>t.state.socket.socket)),s=(0,r.Fl)((()=>t.state.requests)),n=(0,G.iH)({username:"__none__",id:""}),a=(e,t)=>{n.value.username=t,n.value.id=e},i=()=>{o.value.emit("accept_duel",{op_id:n.value.id})};return(0,r.bv)((()=>{t.commit("clearRequests")})),{requests:s,chosen_request:n,selectRequest:a,accept:i}}};const ye=(0,a.Z)(we,[["render",fe],["__scopeId","data-v-14da4b02"]]);var De=ye,be={name:"Multiplayer",components:{Navbar:k,Rooms:ee,UserData:pe,Requests:De},setup(){const e=(0,$.oR)(),t=(0,G.iH)(""),o=(0,G.iH)("__none__"),s=(0,r.Fl)((()=>e.state.hostingName)),n=e=>{console.log(e),t.value=e},a=e=>{o.value=e};return{handleUsername:n,handleChosenDeck:a,username:t,chosen_deck:o,hosting_name:s}}};const Ce=(0,a.Z)(be,[["render",A],["__scopeId","data-v-14ec306b"]]);var Te=Ce;const Se={class:"masterContainer"},Me={class:"card_info"},Re={class:"game_section_container"},qe={class:"playable"};function Ie(e,t,o,s,n,a){const i=(0,r.up)("CurrentCard"),c=(0,r.up)("CardListDisplayer"),d=(0,r.up)("TabletopVue"),l=(0,r.up)("PhasesButtonsVue"),u=(0,r.up)("GameChat");return(0,r.wg)(),(0,r.iD)("div",Se,[(0,r._)("div",Me,[(0,r.Wm)(i),(0,r._)("button",{class:"back_to_rooms",onClick:t[0]||(t[0]=(...e)=>s.leaveRoom&&s.leaveRoom(...e))}," Leave ")]),(0,r._)("div",Re,[(0,r._)("div",qe,[(0,r.Wm)(c),(0,r.Wm)(d)]),(0,r.Wm)(l)]),(0,r.Wm)(u)])}var je=o.p+"img/bss_reverse.41293235.jpg";const Oe={class:"card"},He=["src"],Be={key:1,src:je};function We(e,t,o,s,n,a){return(0,r.wg)(),(0,r.iD)("div",Oe,[""!=s.image?((0,r.wg)(),(0,r.iD)("img",{key:0,src:s.image},null,8,He)):((0,r.wg)(),(0,r.iD)("img",Be))])}var Ae={name:"Card",setup(){const e=(0,$.oR)(),t=(0,r.Fl)((()=>{const t=e.state.current_card;return t}));return{image:t}}};const Ye=(0,a.Z)(Ae,[["render",We],["__scopeId","data-v-4605c6e8"]]);var Pe=Ye,Fe=o.p+"img/bs_tabletop.fd4134f3.png";const Ze=e=>((0,r.dD)("data-v-733bd1f1"),e=e(),(0,r.Cn)(),e),Ue={class:"tabletop"},ze=Ze((()=>(0,r._)("img",{src:Fe,alt:"Battle zone background"},null,-1)));function xe(e,t,o,s,n,a){const i=(0,r.up)("FieldSide");return(0,r.wg)(),(0,r.iD)("div",Ue,[ze,(0,r.Wm)(i,{own:!1}),(0,r.Wm)(i,{own:!0})])}const Ee={class:"side_zone left_zone"},Ne={class:"battle_zone"},Ke={class:"side_zone right_zone"},Ve={class:"trash_zone"};function Le(e,t,o,s,n,a){const i=(0,r.up)("Hand"),c=(0,r.up)("VoidVue"),d=(0,r.up)("LifeVue"),l=(0,r.up)("Burst"),u=(0,r.up)("CoresReserve"),p=(0,r.up)("BattleRow"),_=(0,r.up)("Deck"),m=(0,r.up)("TrashCards"),v=(0,r.up)("CoresTrash"),g=(0,r.up)("RevealZone");return(0,r.wg)(),(0,r.iD)("div",{class:(0,q.C_)(["masterContainer",{oponents_side:!o.own}])},[(0,r.Wm)(i,{own:o.own},null,8,["own"]),(0,r.Wm)(c,{own:o.own},null,8,["own"]),(0,r._)("div",Ee,[(0,r.Wm)(d,{own:o.own},null,8,["own"]),(0,r.Wm)(l,{own:o.own},null,8,["own"]),(0,r.Wm)(u,{own:o.own,cores:s.coresObj},null,8,["own","cores"])]),(0,r._)("div",Ne,[(0,r.Wm)(p,{origin:"in_front",own:o.own},null,8,["own"]),(0,r.Wm)(p,{origin:"in_middle",own:o.own},null,8,["own"]),(0,r.Wm)(p,{origin:"in_back",own:o.own},null,8,["own"])]),(0,r._)("div",Ke,[(0,r._)("div",null,[(0,r.Wm)(_,{own:o.own},null,8,["own"]),(0,r._)("div",Ve,[(0,r.Wm)(m,{own:o.own},null,8,["own"]),(0,r.Wm)(v,{own:o.own},null,8,["own"])])])]),(0,r.Wm)(g,{own:o.own},null,8,["own"])],2)}const Je=["id"],Ge=["src"],$e=["id"];function Qe(e,t,o,n,a,i){const c=(0,r.up)("Core");return(0,r.wg)(),(0,r.iD)("div",{class:(0,q.C_)(["card_container",{rested:n.cardObj.rested,selected:n.cardObj.selected,activated:n.cardObj.activated}]),id:n.cardObj.id,style:(0,q.j5)({marginLeft:o.margin_left+"px"}),ref:"card",onDragenter:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[3]||(t[3]=(0,s.iM)((()=>{}),["prevent"])),draggable:"true",onClick:[t[4]||(t[4]=(0,s.iM)(((...e)=>n.activateEffect&&n.activateEffect(...e)),["shift"])),t[5]||(t[5]=(0,s.iM)(((...e)=>n.selectCard&&n.selectCard(...e)),["exact"]))],onDragstart:t[6]||(t[6]=(0,s.iM)((e=>n.drag(e)),["stop"])),onDblclick:t[7]||(t[7]=(0,s.iM)(((...e)=>n.restUnrest&&n.restUnrest(...e)),["exact"])),onDrop:t[8]||(t[8]=(0,s.iM)((e=>n.drop(e)),["stop"]))},[n.cardObj.url&&!n.cardObj.seted?((0,r.wg)(),(0,r.iD)("img",{key:0,src:n.cardObj.url,onMouseenter:t[0]||(t[0]=(...e)=>n.setAsCurrent&&n.setAsCurrent(...e))},null,40,Ge)):((0,r.wg)(),(0,r.iD)("img",{key:1,src:je,onMouseenter:t[1]||(t[1]=(...e)=>n.setAsCurrent&&n.setAsCurrent(...e))},null,32)),(0,r._)("div",{class:"cores_container",id:n.cardObj.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cardObj.cores.filter((e=>e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:o.own,key:t,origin:o.place,core:e},null,8,["own","origin","core"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cardObj.cores.filter((e=>!e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:o.own,key:t,origin:o.place,core:e},null,8,["own","origin","core"])))),128))],8,$e)],46,Je)}const Xe=["in_hand","in_front","in_middle","in_back","in_burst","in_deck","in_trash","in_reveal"],et=["in_trash","in_reserve","in_life","in_void"];function tt(){return{in_deck:[],in_hand:[],in_front:[],in_middle:[],in_back:[],in_trash:[],in_reveal:[],in_burst:{}}}function ot(e,t,o,s,r){return new Promise(((t,n)=>{const a=Xe.some((e=>e==s));if(!a)return;const i=e.dataTransfer.getData("player_org"),c=e.dataTransfer.getData("card_origin"),d=e.dataTransfer.getData("card_id"),l={origin:c,destiny:s,player_dest:o,player_org:i,card_id:d};r.dispatch("moveCard",l).then((e=>t({moved:e,params:l})))}))}function st(e,t,o,s,r){return new Promise(((n,a)=>{const i=et.some((e=>e==s));if(!i&&!t)return;const c=e.dataTransfer.getData("origin"),d=e.dataTransfer.getData("player_org"),l=e.dataTransfer.getData("card_id"),u={player_org:d,player_dest:o,origin:c,destiny:s,card_id_org:l,card_id_dest:t};r.dispatch("moveCores",u).then((({moved:e,core_ids:t})=>n({moved:e,params:u,core_ids:t})))}))}function rt(e,t,o,s,r){const n={origin:e,status:!0,player:t};o.commit("changeDisplayerStatus",n),o.commit("lookingSomething",{...n,op_id:r}),s.emit("looking_something",{...n,op_id:r})}var nt=o.p+"img/soul_core.4b26c8e6.png",at=o.p+"img/common_core.0ac72cdc.png";const it={key:0,src:nt},ct={key:1,src:at};function dt(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("div",{ref:"core",class:(0,q.C_)(["core",{soul:n.coreObj.soul,selected:n.coreObj.selected}]),draggable:"true",onClick:t[0]||(t[0]=(...e)=>n.flipSelectStatus&&n.flipSelectStatus(...e)),onDragstart:t[1]||(t[1]=(0,s.iM)((e=>n.drag(e)),["stop"])),onDblclick:t[2]||(t[2]=(0,s.iM)((()=>{}),["stop"]))},[n.coreObj.soul?((0,r.wg)(),(0,r.iD)("img",it)):((0,r.wg)(),(0,r.iD)("img",ct))],34)}var lt={name:"Core",props:{core:{default:{id:"",soul:!1,selected:!1}},own:{type:Boolean},origin:{default:"",type:String}},setup(e){const t=(0,$.oR)(),o=(0,G.iH)(null),s=e.own,n=e.origin,a=(0,r.Fl)((()=>e.core)),i=t.state.socket,c=()=>{s&&(a.value.selected=!a.value.selected)},d=e=>{if(console.log("Dragging core"),e.stopPropagation(),!s)return;e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";const t=o.value.parentElement.getAttribute("id");e.dataTransfer.setData("origin",n),e.dataTransfer.setData("player_org",i.socket.id),t&&e.dataTransfer.setData("card_id",t)};return{core:o,coreObj:a,flipSelectStatus:c,drag:d}}};const ut=(0,a.Z)(lt,[["render",dt],["__scopeId","data-v-31df004c"]]);var pt=ut,_t={name:"Card",props:{margin_left:{type:Number,default:15},card:{default:{id:"",url:"",seted:!1,selected:!1,rested:!1,cores:{soul:0,commons:0}}},setedDef:{default:!1,type:Boolean},restedDef:{default:!1,type:Boolean},place:{default:"",type:String},own:{type:Boolean}},components:{Core:pt},setup(e){const t=(0,$.oR)(),o=(0,G.iH)(null),s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>e.margin_left)),i=(0,r.Fl)((()=>e.card)),c=e.setedDef,d=e.restedDef,l=e.own,u=e.place,p=()=>{i.value.select();const e={card_id:i.value.id,origin:u,player_org:l?s.id:n,op_id:n};s.emit("select_card",e)},_=()=>{if(!l)return;i.value.activate();const e={card_id:i.value.id,origin:u,op_id:n,player_org:l?s.id:n};s.emit("activate_effect",e),t.commit("newMessage",{msg:"Effect activated",player_org:s.id,important:!0})},m=e=>{st(e,i.value.id,l?s.id:n,u,t).then((({moved:e,params:t,core_ids:o})=>{e&&s.emit("move_cores",{...t,op_id:n,core_ids:o})}))},v=()=>{!l&&i.value.seted||t.commit("setCurrentCard",i.value.url)},g=e=>{if(console.log("Dragging card"),!l)return;e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";const t=u;if(e.dataTransfer.setData("player_org",s.id),e.dataTransfer.setData("card_origin",t),e.dataTransfer.setData("card_id",i.value.id),"in_deck"==t){const t=JSON.stringify({...i.value});e.dataTransfer.setData("card_obj",t)}},h=()=>{const e=o.value.parentElement;l&&(i.value.rested=!i.value.rested,s.emit("rest_unrest",{card_id:i.value.id,place:e.getAttribute("data-origin"),op_id:n}))};return(0,r.bv)((()=>{i.value.seted=c,i.value.rested=d})),{marginLeft:a,cardObj:i,setAsCurrent:v,drag:g,drop:m,restUnrest:h,activateEffect:_,selectCard:p,card:o}}};const mt=(0,a.Z)(_t,[["render",Qe],["__scopeId","data-v-1eb53eda"]]);var vt=mt;const gt=["data-origin","data-own"];function ht(e,t,o,n,a,i){const c=(0,r.up)("Card");return(0,r.wg)(),(0,r.iD)("div",{class:"row",ref:"row","data-origin":o.origin,"data-own":o.own,onDrop:t[0]||(t[0]=e=>n.drop(e)),onDragenter:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.row_cards,(e=>((0,r.wg)(),(0,r.j4)(c,{place:o.origin,key:e.id,margin_left:n.space,card:e,own:o.own},null,8,["place","margin_left","card","own"])))),128))],40,gt)}var kt={name:"BattleRow",props:["origin","own"],components:{Card:vt},setup(e){const t=(0,$.oR)(),{origin:o,own:s}=e,n=t.state.socket.socket,a=t.state.op_id,i=(0,r.Fl)((()=>{const e=t.state.cards[s?n.id:a];return e[o]})),c=(0,G.iH)(15),d=(0,G.iH)(null);function l(){const e=d.value.clientWidth,t=50,o=i.value.length,s=e-t*o||1/0;c.value=s>15*o?15:s/o}function u(e){ot(e,n.id,s?n.id:a,o,t).then((({moved:e,params:t})=>{e&&n.emit("move_card",{...t,op_id:a})}))}return(0,r.bv)((()=>{window.onload=()=>{l()}})),(0,r.ic)((()=>{(0,r.Y3)(l())})),{row:d,row_cards:i,space:c,adjustSpaces:l,drop:u}}};const ft=(0,a.Z)(kt,[["render",ht],["__scopeId","data-v-cd7cc038"]]);var wt=ft;const yt=e=>((0,r.dD)("data-v-3a92f4e6"),e=e(),(0,r.Cn)(),e),Dt={key:0,class:"looking"},bt={key:1,class:"deck_options_container"},Ct=yt((()=>(0,r._)("img",{src:je,class:"back_card"},null,-1)));function Tt(e,t,o,n,a,i){const c=(0,r.up)("fai");return(0,r.wg)(),(0,r.iD)("div",{class:"deck_zone",onDblclick:t[8]||(t[8]=e=>n.drawCard(1)),onDrop:t[9]||(t[9]=e=>n.dropInDeck(e)),onDragenter:t[10]||(t[10]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[11]||(t[11]=(0,s.iM)((()=>{}),["prevent"]))},[n.looking?((0,r.wg)(),(0,r.iD)("span",Dt,"Looking deck")):(0,r.kq)("",!0),o.own?((0,r.wg)(),(0,r.iD)("div",bt,[(0,r._)("div",{class:"deck_option",onClick:t[0]||(t[0]=e=>n.drawCard(4)),onDblclick:t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"]))},[(0,r.Wm)(c,{icon:"4"})],32),(0,r._)("div",{class:"deck_option",onClick:t[2]||(t[2]=(...e)=>n.showDeck&&n.showDeck(...e)),onDblclick:t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"]))},[(0,r.Wm)(c,{icon:"eye"})],32),(0,r._)("div",{class:"deck_option",onClick:t[4]||(t[4]=(...e)=>n.revealTop&&n.revealTop(...e)),onDblclick:t[5]||(t[5]=(0,s.iM)((()=>{}),["stop"]))},[(0,r.Wm)(c,{icon:"right-from-bracket"})],32),(0,r._)("div",{class:"deck_option",onClick:t[6]||(t[6]=(...e)=>n.shuffleDeck&&n.shuffleDeck(...e)),onDblclick:t[7]||(t[7]=(0,s.iM)((()=>{}),["stop"]))},[(0,r.Wm)(c,{icon:"shuffle"})],32)])):(0,r.kq)("",!0),Ct],32)}var St={name:"Deck",props:["own"],setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>{const e=t.state.looking[o?s.id:n];return"in_deck"==e})),i=()=>{t.commit("revealTop",{player_org:s.id}),s.emit("reveal_top",{player_org:s.id,op_id:n})},c=()=>{const e=t.state.cards[s.id].in_deck;s.emit("shuffle_deck",{deck:e,player_org:s.id,op_id:n})},d=e=>{o&&t.dispatch("drawCard",{num:e,player_org:s.id}).then((()=>s.emit("draw_card",{op_id:n,num:e}))).catch((e=>console.log(e)))},l=o=>{if(!e.own)return void alert("You are unauthorized to drop cards into your oponents deck...");const r=o.dataTransfer.getData("card_origin"),a=o.dataTransfer.getData("card_id");K().fire({title:"Sending card to deck",text:"Where do you want to send the card to",confirmButtonText:"Top",cancelButtonText:"Bottom",showCancelButton:!0,focusConfirm:!1}).then((e=>{const o=e.isConfirmed,i={origin:r,player_org:s.id,top:o,card_id:a};t.dispatch("returnToDeck",i),s.emit("return_to_deck",{...i,op_id:n})}))},u=()=>{rt("in_deck",s.id,t,s,n)};return{looking:a,drawCard:d,dropInDeck:l,showDeck:u,shuffleDeck:c,revealTop:i}}};const Mt=(0,a.Z)(St,[["render",Tt],["__scopeId","data-v-3a92f4e6"]]);var Rt=Mt;const qt=["data-own"];function It(e,t,o,n,a,i){const c=(0,r.up)("Card");return(0,r.wg)(),(0,r.iD)("div",{class:"hand myhand","data-origin":"in_hand","data-own":o.own,onDragenter:t[0]||(t[0]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDrop:t[2]||(t[2]=e=>n.drop(e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cards,(e=>((0,r.wg)(),(0,r.j4)(c,{key:e.id,place:"in_hand",card:e,own:o.own,setedDef:!o.own},null,8,["card","own","setedDef"])))),128))],40,qt)}var jt={name:"hand",props:["own"],components:{Card:vt},setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cards[o?s.id:n].in_hand)),i=e=>{o&&ot(e,s.id,o?s.id:n,"in_hand",t).then((({moved:e,params:t})=>{e&&s.emit("move_card",{...t,op_id:n})}))};return{cards:a,drop:i}}};const Ot=(0,a.Z)(jt,[["render",It],["__scopeId","data-v-78c3da39"]]);var Ht=Ot;const Bt=["data-own"],Wt={class:"trash_options_container"},At=["src"];function Yt(e,t,o,n,a,i){const c=(0,r.up)("fai");return(0,r.wg)(),(0,r.iD)("div",{class:"trash_cards_zone","data-origin":"in_trash","data-own":n.own,onDrop:t[1]||(t[1]=e=>n.dropInTrash(e)),onDragenter:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[3]||(t[3]=(0,s.iM)((()=>{}),["prevent"]))},[(0,r._)("div",Wt,[(0,r._)("div",{class:"trash_option",onClick:t[0]||(t[0]=(...e)=>n.showTrash&&n.showTrash(...e))},[(0,r.Wm)(c,{icon:"eye"})])]),n.last_card_in_trash?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"trash_card_img",src:n.last_card_in_trash.url},null,8,At)):(0,r.kq)("",!0)],40,Bt)}var Pt={name:"Trash_cards_zone",props:["own"],setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=()=>{const e={origin:"in_trash",status:!0,player:o?s.id:n};t.commit("changeDisplayerStatus",e),t.commit("lookingSomething",{...e,op_id:n}),s.emit("looking_something",{...e,op_id:n})},i=(0,r.Fl)((()=>{const o=t.state.cards[e.own?s.id:n].in_trash;return o.length>0?o[o.length-1]:void 0})),c=r=>{e.own&&ot(r,s.id,o?s.id:n,"in_trash",t,s).then((({moved:e,params:t})=>{e&&s.emit("move_card",{...t,op_id:n})}))};return{dropInTrash:c,showTrash:a,own:o,last_card_in_trash:i}}};const Ft=(0,a.Z)(Pt,[["render",Yt],["__scopeId","data-v-46833f52"]]);var Zt=Ft;const Ut=["data-own"],zt={key:0,class:"burst_options_container"};function xt(e,t,o,n,a,i){const c=(0,r.up)("fai"),d=(0,r.up)("Card");return(0,r.wg)(),(0,r.iD)("div",{class:"burst_zone","data-origin":"in_burst","data-own":o.own,onDrop:t[1]||(t[1]=e=>n.drop(e)),onDragenter:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[3]||(t[3]=(0,s.iM)((()=>{}),["prevent"]))},[o.own?((0,r.wg)(),(0,r.iD)("div",zt,[(0,r._)("div",{class:"burst_option",onClick:t[0]||(t[0]=(...e)=>n.flipCard&&n.flipCard(...e))},[(0,r.Wm)(c,{icon:"arrows-rotate"})])])):(0,r.kq)("",!0),Object.keys(n.cardInBurst).length>0?((0,r.wg)(),(0,r.j4)(d,{key:1,setedDef:!0,card:n.cardInBurst,own:o.own,place:"in_burst",margin_left:0},null,8,["card","own"])):(0,r.kq)("",!0)],40,Ut)}var Et={name:"burst_zone",props:["own"],components:{Card:vt},setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cards[o?s.id:n].in_burst)),i=e=>{ot(e,s.id,s.id,"in_burst",t).then((({moved:e,params:t})=>{e&&s.emit("move_card",{...t,op_id:n})}))},c=()=>{0!=Object.keys(a.value)&&(t.commit("flipBurstCard",{player_org:s.id}),s.emit("flip_burst_card",{player_org:s.id,op_id:n}))};return{cardInBurst:a,drop:i,flipCard:c}}};const Nt=(0,a.Z)(Et,[["render",xt],["__scopeId","data-v-660ba64c"]]);var Kt=Nt;const Vt=["data-own"];function Lt(e,t,o,n,a,i){const c=(0,r.up)("Core");return(0,r.wg)(),(0,r.iD)("div",{class:"life_zone","data-origin":"in_life","data-own":n.own,onDragenter:t[0]||(t[0]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDrop:t[2]||(t[2]=e=>n.drop(e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,key:t,origin:"in_life",core:e},null,8,["own","core"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>!e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,key:t,origin:"in_life",core:e},null,8,["own","core"])))),128))],40,Vt)}var Jt={name:"Life",components:{Core:pt},props:["own"],setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cores[o?s.id:n].in_life)),i=e=>{st(e,void 0,o?s.id:n,"in_life",t).then((({moved:e,params:t,core_ids:o})=>{e&&s.emit("move_cores",{...t,op_id:n,core_ids:o})}))};return{own:o,cores:a,drop:i}}};const Gt=(0,a.Z)(Jt,[["render",Lt],["__scopeId","data-v-235d066a"]]);var $t=Gt;const Qt=e=>((0,r.dD)("data-v-67032a17"),e=e(),(0,r.Cn)(),e),Xt=Qt((()=>(0,r._)("span",null,"Void",-1))),eo=[Xt];function to(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"void_zone",onDrop:t[0]||(t[0]=e=>n.drop(e)),onDragenter:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"]))},eo,32)}var oo={name:"Void",props:["own"],setup(e){const t=(0,$.oR)(),o=t.state.socket.socket,s=t.state.op_id,r=e.own,n=e=>{st(e,void 0,r?o.id:s,"in_void",t).then((({moved:e,params:t,core_ids:r})=>{e&&o.emit("move_cores",{...t,op_id:s,core_ids:r})}))};return{own:r,drop:n}}};const so=(0,a.Z)(oo,[["render",to],["__scopeId","data-v-67032a17"]]);var ro=so;const no=["data-own"];function ao(e,t,o,n,a,i){const c=(0,r.up)("Core");return(0,r.wg)(),(0,r.iD)("div",{class:"reserve_zone","data-own":n.own,"data-origin":"in_reserve",onDrop:t[0]||(t[0]=e=>n.drop(e)),onDragenter:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"])),onDblclick:t[3]||(t[3]=(...e)=>n.incrementCores&&n.incrementCores(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,key:t,origin:"in_reserve",core:e},null,8,["own","core"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>!e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,key:t,origin:"in_reserve",core:e},null,8,["own","core"])))),128))],40,no)}var io={name:"reserve_zone",props:["own"],components:{Core:pt},setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cores[o?s.id:n].in_reserve)),i=e=>{st(e,void 0,o?s.id:n,"in_reserve",t).then((({moved:e,params:t,core_ids:o})=>{e&&s.emit("move_cores",{...t,op_id:n,core_ids:o})}))},c=()=>{if(!o)return;const e={player_org:s.id,origin:"in_reserve",op_id:n};s.emit("increment_cores",e)};return{own:o,cores:a,drop:i,incrementCores:c}}};const co=(0,a.Z)(io,[["render",ao],["__scopeId","data-v-3d12f5bc"]]);var lo=co;const uo=["data-own"];function po(e,t,o,n,a,i){const c=(0,r.up)("Core");return(0,r.wg)(),(0,r.iD)("div",{class:"trash_cores_zone","data-origin":"in_trash","data-own":n.own,onDrop:t[0]||(t[0]=e=>n.drop(e)),onDragenter:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,origin:"in_trash",key:t,core:e},null,8,["own","core"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cores.filter((e=>!e.soul)),((e,t)=>((0,r.wg)(),(0,r.j4)(c,{own:n.own,origin:"in_trash",key:t,core:e},null,8,["own","core"])))),128))],40,uo)}var _o={name:"CoresTrash",props:["own"],components:{Core:pt},setup(e){const t=e.own,o=(0,$.oR)(),s=o.state.socket.socket,n=o.state.op_id,a=(0,r.Fl)((()=>o.state.cores[t?s.id:n].in_trash)),i=e=>{st(e,void 0,t?s.id:n,"in_trash",o).then((({moved:e,params:t,core_ids:o})=>{e&&s.emit("move_cores",{...t,core_ids:o,op_id:n})}))};return{own:t,cores:a,drop:i}}};const mo=(0,a.Z)(_o,[["render",po],["__scopeId","data-v-af61afe4"]]);var vo=mo;const go=["data-own"],ho={class:"cards_container"},ko={key:0,class:"reveal_options_container"};function fo(e,t,o,n,a,i){const c=(0,r.up)("Card"),d=(0,r.up)("fai");return(0,r.wg)(),(0,r.iD)("div",{class:"reveal_zone","data-origin":"in_reveal","data-own":n.own,onDragenter:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"])),onDragover:t[3]||(t[3]=(0,s.iM)((()=>{}),["prevent"])),onDrop:t[4]||(t[4]=e=>n.drop(e))},[(0,r._)("div",ho,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cards,((e,t)=>((0,r.wg)(),(0,r.j4)(c,{key:t,own:n.own,margin_left:10,setedDef:!n.own,restedDef:!0,card:e,place:"in_reveal"},null,8,["own","setedDef","card"])))),128))]),n.own?((0,r.wg)(),(0,r.iD)("div",ko,[(0,r._)("div",{class:"reveal_option",onClick:t[0]||(t[0]=(...e)=>n.returnToBottom&&n.returnToBottom(...e))},[(0,r.Wm)(d,{icon:"arrow-down"})]),(0,r._)("div",{class:"reveal_option",onClick:t[1]||(t[1]=(...e)=>n.revealCards&&n.revealCards(...e))},[(0,r.Wm)(d,{icon:"eye"})])])):(0,r.kq)("",!0)],40,go)}var wo={name:"RevealZone",props:["own"],components:{Card:vt},setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cards[o?s.id:n].in_reveal)),i=e=>{ot(e,s.id,o?s.id:n,"in_reveal",t).then((({params:e,moved:t})=>{t&&s.emit("move_card",{...e,op_id:n})}))},c=()=>{t.dispatch("multiReturnToBottom",{player_org:s.id}),s.emit("multi_return_to_bottom",{player_org:s.id,op_id:n})},d=()=>{s.emit("reveal_cards",{op_id:n})};return{own:o,cards:a,drop:i,returnToBottom:c,revealCards:d}}};const yo=(0,a.Z)(wo,[["render",fo],["__scopeId","data-v-506df7ce"]]);var Do=yo,bo={name:"FieldSide",props:["own"],components:{Card:vt,BattleRow:wt,LifeVue:$t,Deck:Rt,TrashCards:Zt,Hand:Ht,Burst:Kt,CoresReserve:lo,CoresTrash:vo,VoidVue:ro,RevealZone:Do},setup(e){const t=(0,$.oR)(),o=e.own,s=t.state.socket,n=t.state.op_id,a=(0,r.Fl)((()=>t.state.cores[o?s.socket.id:n]));return{coresObj:a}}};const Co=(0,a.Z)(bo,[["render",Le],["__scopeId","data-v-11303769"]]);var To=Co,So={name:"Tabletop",components:{FieldSide:To},setup(){(0,$.oR)();return{}}};const Mo=(0,a.Z)(So,[["render",xe],["__scopeId","data-v-733bd1f1"]]);var Ro=Mo;const qo={key:0,class:"cardListDisplayer"},Io=["data-origin"];function jo(e,t,o,n,a,i){const c=(0,r.up)("fai"),d=(0,r.up)("Card");return n.show?((0,r.wg)(),(0,r.iD)("div",qo,[(0,r._)("button",{class:"close_button",onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>n.hide&&n.hide(...e)),["prevent"]))},[(0,r.Wm)(c,{icon:"xmark"})]),(0,r._)("div",{class:"cardDisplayer","data-own":"true","data-origin":n.origin},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cards,((e,t)=>((0,r.wg)(),(0,r.j4)(d,{card:e,place:n.origin,key:t,own:!(n.player==n.op_id)},null,8,["card","place","own"])))),128))],8,Io)])):(0,r.kq)("",!0)}var Oo={name:"cardListDisplayer",components:{Card:vt},setup(){const e=(0,$.oR)(),t=e.state.socket,o=e.state.op_id,s=(0,r.Fl)((()=>e.state.cardDisplayer.origin)),n=(0,r.Fl)((()=>e.state.cardDisplayer.player)),a=(0,r.Fl)((()=>{const t=e.state.cards[n.value];if(!t)return[];const o=t[s.value];return o})),i=(0,r.Fl)((()=>e.state.cardDisplayer.showing)),c=()=>{e.commit("changeDisplayerStatus",{origin:s.value,status:!1});const r={player:t.socket.id,op_id:o,origin:null};e.commit("lookingSomething",r),t.socket.emit("looking_something",r)};return{cards:a,show:i,origin:s,player:n,op_id:o,hide:c}}};const Ho=(0,a.Z)(Oo,[["render",jo],["__scopeId","data-v-09701b62"]]);var Bo=Ho;const Wo={class:"phases_and_options"},Ao={class:"phases"},Yo=["onClick"];function Po(e,t,o,s,n,a){return(0,r.wg)(),(0,r.iD)("div",Wo,[(0,r._)("div",Ao,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.phases,((e,t)=>((0,r.wg)(),(0,r.iD)("button",{key:t,class:(0,q.C_)({selected:e==s.activePhase,active:s.active}),onClick:t=>s.setAsSelected(e)},(0,q.zw)(e),11,Yo)))),128)),(0,r._)("button",{class:(0,q.C_)(["end_turn",{active:s.active}]),onClick:t[0]||(t[0]=(...e)=>s.endTurn&&s.endTurn(...e))}," End turn ",2)])])}var Fo={name:"PhasesButtons",setup(){const e=(0,$.oR)(),t=e.state.socket.socket,o=e.state.op_id,s=(0,r.Fl)((()=>e.state.activePhase)),n=(0,r.Fl)((()=>e.state.active)),a=(0,G.iH)(["Start","Core","Draw","Refresh","Main","Attack","End"]),i=s=>{n.value&&(e.dispatch("changePhase",{name:s}),t.emit("change_phase",{name:s,op_id:o}))},c=()=>{n.value&&(e.commit("changeTurn",{player_org:t.id}),t.emit("change_turn",{player_org:t.id,op_id:o}))};return{active:n,activePhase:s,phases:a,setAsSelected:i,endTurn:c}}};const Zo=(0,a.Z)(Fo,[["render",Po],["__scopeId","data-v-6c063b2c"]]);var Uo=Zo;const zo={class:"chat"},xo={class:"messages_container",ref:"messagesContainer"},Eo={class:"sender"};function No(e,t,o,n,a,i){return(0,r.wg)(),(0,r.iD)("form",zo,[(0,r._)("ul",xo,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.messages,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{class:(0,q.C_)(["message",{important:e.important}]),key:t},[(0,r._)("strong",null,(0,q.zw)(e.sender_id==n.player_id?"You":"Oponent")+": ",1),(0,r._)("span",null,(0,q.zw)(e.msg),1)],2)))),128))],512),(0,r._)("div",Eo,[(0,r.wy)((0,r._)("input",{class:"textbox",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.message=e)},null,512),[[s.nr,n.message]]),(0,r._)("input",{type:"submit",value:"Send",onClick:t[1]||(t[1]=(0,s.iM)(((...e)=>n.newMessage&&n.newMessage(...e)),["prevent"]))})])])}var Ko={name:"GameChat",setup(){const e=(0,$.oR)(),t=(0,G.iH)(null),o=e.state.socket.socket,s=e.state.players,n=e.state.op_id,a=(0,r.Fl)((()=>e.state.messages)),i=(0,G.iH)(""),c=()=>{(0,r.Y3)((()=>{t.value.scrollTop=t.value.scrollHeight}))},d=()=>{const t={msg:i.value,player_org:o.id,players:s};e.commit("newMessage",t),o.emit("new_message",{...t,op_id:n}),i.value=""};return(0,r.bv)((()=>{c()})),(0,r.YP)(a,((e,t)=>{c()}),{deep:!0}),{messagesContainer:t,messages:a,message:i,player_id:o.id,newMessage:d}}};const Vo=(0,a.Z)(Ko,[["render",No],["__scopeId","data-v-df4d24d8"]]);var Lo=Vo,Jo={name:"GameRoom",components:{CurrentCard:Pe,TabletopVue:Ro,Card:vt,CardListDisplayer:Bo,PhasesButtonsVue:Uo,GameChat:Lo},setup(){const e=(0,$.oR)(),t=(0,l.tv)(),o=e.state.socket.socket,s=e.state.op_id,r=()=>{o.emit("leave_room",{op_id:s}),t.push("/rooms")};return{leaveRoom:r}}};const Go=(0,a.Z)(Jo,[["render",Ie],["__scopeId","data-v-fd1886d0"]]);var $o=Go;const Qo=e=>((0,r.dD)("data-v-27138a40"),e=e(),(0,r.Cn)(),e),Xo={class:"masterContainer"},es={class:"info_options"},ts={class:"current_card_container"},os=["src"],ss={key:1,class:"current_card",src:je},rs=Qo((()=>(0,r._)("br",null,null,-1))),ns=Qo((()=>(0,r._)("span",null,"Load your deck:",-1))),as=["placeholder"],is={class:"deck_container"},cs={class:"deck_options"},ds={class:"deck_selector_container"},ls=Qo((()=>(0,r._)("label",{for:"deck_selector"},"Deck Selector: ",-1))),us=Qo((()=>(0,r._)("option",{value:"__none__"},"---",-1))),ps=["value"],_s=Qo((()=>(0,r._)("label",{for:"deck_name"},"Name: ",-1))),ms=Qo((()=>(0,r._)("input",{type:"submit",value:"Save"},null,-1))),vs={class:"deck"},gs=["src"];function hs(e,t,o,n,a,i){const c=(0,r.up)("Navbar");return(0,r.wg)(),(0,r.iD)("div",Xo,[(0,r.Wm)(c),(0,r._)("div",es,[(0,r._)("div",ts,[a.currentCard?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"current_card",src:a.currentCard},null,8,os)):((0,r.wg)(),(0,r.iD)("img",ss))]),rs,ns,(0,r.wy)((0,r._)("textarea",{class:"deck_text_loader",cols:"30",rows:"20","onUpdate:modelValue":t[0]||(t[0]=e=>a.deck=e),placeholder:a.placeholder},null,8,as),[[s.nr,a.deck]]),(0,r._)("button",{class:"details_button",onClick:t[1]||(t[1]=(...e)=>i.importDeck&&i.importDeck(...e))},"Import")]),(0,r._)("div",is,[(0,r._)("div",cs,[(0,r._)("div",ds,[ls,(0,r.wy)((0,r._)("select",{name:"deck_selector","onUpdate:modelValue":t[2]||(t[2]=e=>a.active_deck=e)},[us,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.myDecks,((e,t)=>((0,r.wg)(),(0,r.iD)("option",{value:e.name,key:t},(0,q.zw)(e.name),9,ps)))),128))],512),[[s.bM,a.active_deck]]),(0,r._)("button",{class:"load_button",onClick:t[3]||(t[3]=(...e)=>i.loadDeck&&i.loadDeck(...e))},"Load")]),(0,r._)("form",{class:"deck_name_container",onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>i.saveDeck&&i.saveDeck(...e)),["prevent"]))},[_s,(0,r.wy)((0,r._)("input",{type:"text",name:"deck_name","onUpdate:modelValue":t[4]||(t[4]=e=>a.deck_name=e)},null,512),[[s.nr,a.deck_name]]),ms],32)]),(0,r._)("div",vs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.cards,((e,o)=>((0,r.wg)(),(0,r.iD)("img",{src:e,class:"deck_card",key:o,onMouseenter:t[6]||(t[6]=e=>i.setCurrentCard(e))},null,40,gs)))),128))])])])}var ks={name:"DeckLoader",components:{Navbar:k},data(){return{placeholder:"Paste here your deck in tts format",currentCard:"",cards:[],deck:"",myDecks:[],active_deck:"__none__",deck_name:""}},methods:{setCurrentCard(e){this.currentCard=e.target.src},async importDeck(){const e=this.deck.substring(1,this.deck.length-1).split(",");this.cards=e.map((e=>`https://battlespirits-saga.com/images/cards/card/${e}.png`))},saveDeck(){if(this.deck.length<50)return void K().fire({title:"App message",text:"Your deck must have 50 cards"});const e=JSON.parse(localStorage.getItem("BSS_Decklist")||"[]"),t=e.findIndex((e=>e.name==this.deck_name));t>=0&&e.splice(t,1);const o={name:this.deck_name,deck:this.deck};e.push(o),localStorage.setItem("BSS_Decklist",JSON.stringify(e))},loadDeck(){if("__none__"==this.active_deck)return void alert("You must chose a deck to load...");const e=this.myDecks.find((e=>e.name==this.active_deck));if(void 0==e)return void alert("Deck not found...");const t=e.deck.substring(1,e.deck.length-1).split(",");this.cards=t.map((e=>`https://battlespirits-saga.com/images/cards/card/${e}.png`))}},mounted(){this.myDecks=JSON.parse(localStorage.getItem("BSS_Decklist")||"[]")}};const fs=(0,a.Z)(ks,[["render",hs],["__scopeId","data-v-27138a40"]]);var ws=fs;const ys=[{path:"/",name:"home",component:R},{path:"/rooms",name:"rooms",component:Te},{path:"/game",name:"game",component:$o},{path:"/loadDeck",name:"loadDeck",component:ws}],Ds=(0,l.p7)({history:(0,l.PO)(),routes:ys});var bs=Ds,Cs={hostingName:"",looking:{},chosen_deck:{},cards:{},cores:{},coresCarrier:{commons:0,soul:0},current_card:"",socket:{},op_id:"",board_id:"",cardDisplayer:{showing:!1,origin:"in_deck",player:""},active:!1,activePhase:"Start",players:[],messages:[],requests:[]},Ts={clearRequests(e){e.requests.length<=0||e.requests.splice(0,e.requests.length)},setHostingName(e,{username:t}){e.hostingName=t},activateEffect(e,t){const{card_id:o,origin:s,player_org:r}=t,n=e.cards[r][s].find((e=>e.id==o));n.activate();const a=e.players,i=V("Effect activated!",r,a,!0);i&&e.messages.push(i)},selectCard(e,t){const{card_id:o,origin:s,player_org:r}=t,n=e.cards[r][s].find((e=>e.id==o));n.select()},newMessage(e,t){const{msg:o,player_org:s,important:r}=t,n=e.players,a=V(o,s,n,r);a&&e.messages.push(a)},changeTurn(e,t){const{player_org:o}=t;e.active=!e.active,e.activePhase="Start";const s=e.players,r=V("End turn",o,s,!0);r&&e.messages.push(r)},refreshAllCores(e,t){const{player_org:o}=t,s=e.cores[o].in_trash,r=e.cores[o].in_reserve;r.push(...s),s.splice(0,s.length);const n=e.players,a=V("Cores refreshed",o,n,!0);a&&e.messages.push(a)},setCores(e,{cores:t,op_cores:o}){e.cores[e.socket.socket.id]=t,e.cores[e.op_id]=o},incrementCores(e,t){const{player_org:o,origin:s,core:r}=t;e.cores[o][s].push(r);const n=e.players,a=V("Cores refreshed",o,n,!0);a&&e.messages.push(a)},refreshAllCards(e,t){const{player_org:o}=t,s=e.cards[o].in_front,r=e.cards[o].in_middle,n=e.cards[o].in_back;s.forEach((e=>e.rested=!1)),r.forEach((e=>e.rested=!1)),n.forEach((e=>e.rested=!1));const a=e.players,i=V("Cards refreshed",o,a,!0);i&&e.messages.push(i)},revealTop(e,t){const{player_org:o}=t,s=e.cards[o].in_deck.shift();e.cards[o].in_reveal.push(s);const r=e.players,n=V("Reveal from top",o,r,!0);n&&e.messages.push(n)},flipBurstCard(e,t){const{player_org:o}=t;e.cards[o].in_burst.seted=!e.cards[o].in_burst.seted;const s=e.players,r=V("Activate burst!",o,s,!0);r&&e.messages.push(r)},shuffleDeck(e,t){const{deck:o,player_org:s}=t;e.cards[s].in_deck=o;const r=e.players,n=V("Deck shuffled",s,r,!0);n&&e.messages.push(n)},lookingSomething(e,t){const{player:o,origin:s}=t;e.looking[o]=s;const r=e.players,n=V("Looking deck",o,r,!0);n&&e.messages.push(n)},changeDisplayerStatus(e,t){const{status:o,origin:s,player:r}=t;"in_deck"!=s||r!=e.op_id?o?(e.cardDisplayer.showing=o,e.cardDisplayer.origin=s,e.cardDisplayer.player=r):e.cardDisplayer.showing=!e.cardDisplayer.showing:alert("Unauthorized action!")},setBoardId(e,t){e.board_id=t},setSocket(e,t){t?e.socket=t:alert("Socket not found...")},setCurrentCard(e,t){e.current_card=t},setChoosenDecks(e,{deck:t,op_deck:o}){e.cards[e.socket.socket.id].in_deck=t.map((e=>new L(e.id,e.url))),e.cards[e.op_id].in_deck=o.map((e=>new L(e.id,e.url))),e.cards[e.socket.socket.id].in_deck.forEach((e=>{const t=new Image;t.src=e.url})),e.cards[e.op_id].in_deck.forEach((e=>{const t=new Image;t.src=e.url}))},restUnrest(e,t){const{card_id:o,place:s}=t,r=e.cards[e.op_id][s].find((e=>e.id==o));r.rested=!r.rested},setAllHand(e,t){e.cards[t].in_hand.forEach((e=>e.seted=!0))},requestDuel(e,t){e.requests.push(t)}},Ss={changePhase({state:e,dispatch:t},{name:o}){if(e.activePhase=o,!e.active)return;const s=e.socket.socket;if("Core"!=o)return"Draw"==o?(t("drawCard",{player_org:s.id}),void s.emit("draw_card",{player_org:s.id,op_id:e.op_id})):void("Refresh"==o&&s.emit("refresh_all",{player_org:s.id,op_id:e.op_id}));s.emit("increment_cores",{player_org:s.id,origin:"in_reserve",op_id:e.op_id})},moveCores({state:e},t){const{player_org:o,player_dest:s,origin:r,destiny:n,card_id_org:a,card_id_dest:i,core_ids:c}=t;var d,l;if(a){const t=e.cards[o][r].find((e=>e.id==a));d=t.cores}else d=e.cores[o][r];if(!d)return{moved:!1};if(i){const t=e.cards[s][n].find((e=>e.id==i));l=t.cores}else l=e.cores[s][n];if(!l)return{moved:!1};var u,p=[];if(c)for(var _ of c){const e=d.findIndex((e=>e.id==_)),t=d[e];p.push(t),d.splice(e,1)}else p=d.filter((e=>e.selected)),u=p.map((e=>e.id)),d.splice(0,d.length,...d.filter((e=>!e.selected)));return"in_void"==n?(p=null,{moved:!0,core_ids:u}):(l.push(...p),l.forEach((e=>e.selected=!1)),{moved:!0,core_ids:u})},revealCards({state:e,commit:t},o){const{op_id:s}=o,r=e.players.find((e=>e.id!=s));e.cards[r.id].in_reveal.forEach((e=>e.seted=!1)),t("newMessage",{msg:"Cards revealed",player_org:r,important:!0})},multiReturnToBottom({state:e,commit:t},o){const{player_org:s}=o,r=e.cards[s].in_reveal;e.cards[s].in_deck.push(...r),e.cards[s].in_reveal.splice(0,r.length),t("newMessage",{msg:"Returning card to bottom",player_org:s,important:!0})},returnToDeck({state:e,commit:t},o){const{origin:s,player_org:r,top:n,card_id:a}=o,i=e.cards[r][s].findIndex((e=>e.id==a)),c=e.cards[r][s].splice(i,1)[0];t("newMessage",{msg:"Returning to deck",player_org:r,important:!0}),n?e.cards[r].in_deck.splice(0,0,c):e.cards[r].in_deck.push(c)},drawCard({state:e,commit:t},{num:o,player_org:s}){o||(o=1);const r=e.cards[s].in_deck.splice(0,o);return e.cards[s].in_hand.push(...r),t("newMessage",{msg:"Draw card!",player_org:s,important:!0}),r},moveCard({state:e},t){const{origin:o,destiny:s,player_dest:r,player_org:n,card_id:a}=t;if(!n||!r)return void console.log("Missing player origin/destiny...");if(!o||!s)return void console.log("Missing origin/destiny...");if(!a&&!card)return void console.log("Missing card/card_id...");var i={};const c=Array.isArray(e.cards[n][o])?"Array":"Object",d=Array.isArray(e.cards[r][s])?"Array":"Object";if(("Object"!=d||!Object.keys(e.cards[r][s]).length)&&("Array"!=d||!e.cards[r][s].some((e=>e.id==a)))){if("Array"==c){const t=e.cards[n][o].findIndex((e=>e.id==a));if(-1==t)return alert("Card not found in origin..."),!1;i=e.cards[n][o].splice(t,1)[0]}if("Object"==c&&(i=Object.assign({},e.cards[n][o]),e.cards[n][o]={}),!["in_front","in_middle","in_back"].some((e=>e==s))){const t=i.cores;e.cores[n].in_reserve.push(...t),i.cores.splice(0,i.cores.length)}return"Array"==d?(e.cards[r][s].push(i),!0):"Object"==d?(e.cards[r][s]=i,!0):void 0}},addPlayers({state:e},{op_id:t,active:o,players:s}){e.cards[e.socket.socket.id]=tt(),e.active=o,e.looking[e.socket.socket.id]="",e.cards[t]=tt(),e.looking[t]="",e.op_id=t,e.players=s}},Ms=(0,$.MT)({state:Cs,getters:{},mutations:Ts,actions:Ss,modules:{}}),Rs=o(6553),qs=o.n(Rs),Is=o(3494),js=o(8539),Os=o(7749);Is.vI.add(js.mRB);const Hs=(0,s.ri)(d);Hs.component("fai",Os.GN),Hs.use(qs()),Hs.use(Ms),Hs.use(bs),Hs.mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,n){if(!s){var a=1/0;for(l=0;l<e.length;l++){s=e[l][0],r=e[l][1],n=e[l][2];for(var i=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](s[c])}))?s.splice(c--,1):(i=!1,n<a&&(a=n));if(i){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[s,r,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,n,a=s[0],i=s[1],c=s[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(c)var l=c(o)}for(t&&t(s);d<a.length;d++)n=a[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(l)},s=self["webpackChunkapp"]=self["webpackChunkapp"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(65)}));s=o.O(s)})();
//# sourceMappingURL=app.af9d8170.js.map